<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>1sft</title>
    <link rel='stylesheet' href='https://maxcdn.bootstrapcdn.com/font-awesome/4.5.0/css/font-awesome.min.css'>
    <link rel="stylesheet" href="css/style.css">
</head>

<body>
    <header class="TopNav">
        <nav class="TopNav-nav" role="navigation">
            <h3><a class="TopNav-logo" href="/index.html">ONE SQUARE FOOT</a></h3>
            <div>
                <a style="color: white;"" href="/buyer.html"><span style="margin: 0 20px;" class="fa fa-envelope"></span></a>
                <a class="TopNav-login" href="/login.html"></span>Saamer â†“</a>
            </div>
        </nav>
    </header>

    <div class="Wrapper">
        <div class="alert">You have successfully placed your bid.</div>
        <section class="Property">
            <header class="Property-header">
                <div class="Property-headerInfo">
                    <h1 class="Property-title">Single-family home rental</h1>
                    <h2 class="Property-subtitle">South Halifax, Halifax, NS</h2>
                </div>
                <div class="Property-profile">
                    <span class="Property-profileInfo">By Kevin<br>Properties</span>
                </div>
            </header>

            <main class="Property-body">
                <img class="Property-img" src="/img/house1.png" alt="">
                <div class="Property-info">
                    <div class="Property-progressBar" role="progressbar" aria-valuenow="70" aria-valuemin="0" aria-valuemax="100">
                        <div class="Property-progress"></div>
                    </div>
                    <div class="Property-infoItem">
                        <div class="Property-infoItemTitle Property-infoItemTitle--green">CA$ 188,300</div>
                        <div class="Property-infoItemSubtitle">Pledged of CA$ 269,000</div>
                    </div>

                    <div class="Property-infoItem">
                        <div class="Property-infoItemTitle">26</div>
                        <div class="Property-infoItemSubtitle">Backers</div>
                    </div>

                    <div class="Property-infoItem">
                        <div class="Property-infoItemTitle">29</div>
                        <div class="Property-infoItemSubtitle">Days to go</div>
                    </div>

                    <button class="Property-btn" data-micromodal-trigger="modal-1">Back this project</button>
                </div>
            </main>
        </section>

        <section>
            <div class="Filter Filter--property">
                <div class="Filter-item Filter-item--active">Summary</div>
                <div class="Filter-item">Sponsor</div>
                <div class="Filter-item">Dilligence Report</div>
                <div class="Filter-item">Finicials</div>
                <div class="Filter-item">Location</div>
                <div class="Filter-item">FAQs</div>
            </div>
            <h3>About this property</h3>
            <p class="Property-aboutText">
                This home is a part of 1, 2 and 3 bedroom unit comminuties located in the heart of South Halifax. 
                It allows for opportunities to reduce costs by installing sub-meters to eliminate tenant water and 
                sewer expenses as well as sharing staff with neighboring WCP-owned properties. In addition to reducing costs, 
                the Property is in a prime location which should absorb the projected rental increase following the value-add 
                program. 
            </p>
            <h3>Key points</h3>
            <ul>
                <li>Prime location in South Halifax, just over a mile away from the North Hills Development (Newly added luxury hotels, high-end retail and office space). </li>
                <li>The business plan calls for installation of water sub-meters for expected savings of around $56K annually in utility expense.</li>
                <li>$100 projected rental increase per unit following the value-add program which reflects similar, nearby renovated properties resulting in around $70,800 of additional income.</li>
                <li>The value-add program also calls for the addition of a one bedroom unit which should bolster NOI at the Property.</li>
            </ul>
        </section>

        <section class="Property-chart">
            <img class="Property-chartImg" src="/img/chart.png" alt="">
        </section>
    </div>

    <div class="modal micromodal-slide" id="modal-1" aria-hidden="true">
        <div class="modal__overlay" tabindex="-1" data-micromodal-close>
            <div class="modal__container" role="dialog" aria-modal="true" aria-labelledby="modal-1-title">
                <header class="modal__header">
                    <h2 id="modal-1-title" class="modalTitle">
                        How many shares would you like to bid for this project?
                    </h2>
                    <button class="modal__close" aria-label="Close modal" data-micromodal-close></button>
                </header>
                <main class="modal__content" id="modal-1-content">
                    <div class="Bid-row">
                        <span>Shares</span><input type="text" value="10">
                    </div>
                    <div class="Bid-row">
                        <span>Escrow fees</span><span>$300</span>
                    </div>
                    <div class="Bid-row">
                        <span>You'll pay</span><span>$10,300</span>
                    </div>
                    <label class="Bid-label" for="yes">Pay with Credit Card</label>
                    <select class="Bid-select" name="yes" id="yes">
                        <option value="********2343">********2343</option>
                    </select>
                    <div class="Big-upload">
                        <p style="margin: 30px 0 20px">Please provide the following documents:</p>
                        <p class="fat">
                            Canadian Passport / Permanent Resident Card<br> Driver's License
                        </p>
                        <div class="uploadWrapper">
                            <input type="file" multiple="multiple" id="fupTemplates" name="fupTemplates" class="fileUpload" style="display: none;">
                            <label for="fupTemplates" class="lblFileElem">Click here to select some files for Uploading</label>
                            <div id="filesAvailable"></div>
                        </div>
                    </div>
                </main>
                <footer class="modal__footer" style="text-align: center;">
                    <button class="button button--secondary">Close</button>
                    <button class="button js-placeBid" data-micromodal-close aria-label="Close this dialog window">Place bid</button>
                </footer>
            </div>
        </div>
    </div>

    <script src="https://unpkg.com/micromodal/dist/micromodal.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <script src="js/index.js"></script>

    <script>
        const bidBtn = document.querySelector('.js-placeBid')
        const alert = document.querySelector('.alert')

        bidBtn.addEventListener('click', () => {
            alert.style.display = 'block';
            setTimeout(() => {
                window.scrollTo(0, 0);
            }, 1)
        })
    </script>

    <script>
        MicroModal.init();
    </script>

    <script>
        let $form = $('.uploadWrapper'); // false form, div wrapper
        let lblFileElem = document.querySelector('.lblFileElem'); // file label
        let filesAvailable = document.getElementById('filesAvailable');
        let fileInput = document.querySelector('.fileUpload');

        var isAdvancedUpload = function () {
            var div = document.createElement('div');
            return (('draggable' in div) || ('ondragstart' in div && 'ondrop' in div)) && 'FormData' in window && 'FileReader' in window;
        }();
        /* reset */
        $(document).ready(function () {
            if (isAdvancedUpload) {
                $('.loadingDiv').addClass('has-advanced-upload'); // to rearrange CSS
                $('.lblFileElem').text('Click here to select some files for Uploading'); // alternate labelling

                $form
                    .on('drag dragstart dragend dragover dragenter dragleave', function (e) {
                        if (detectIE() != false) { // is ie
                            $('.uploadWrapper').addClass('error');
                            $('.lblFileElem').text('Internet Explorer does not support this functionality. Please consider upgrading your browser.'); // alternate labelling
                        } else { // not ie
                            e.preventDefault();
                            e.stopPropagation();
                        }
                    })
                    .on('dragover dragenter', function () {
                        $('.uploadWrapper').addClass('highlight');

                    })
                    .on('dragleave dragend', function () {
                        $('.uploadWrapper').removeClass('highlight');
                        $('.uploadWrapper').removeClass('error');
                        $('.lblFileElem').text('Click here to select some files for Uploading'); // alternate labelling
                    })
                    .on('drop', function (e) {
                        e.preventDefault();
                        e.stopPropagation();
                        $('.uploadWrapper').removeClass('highlight');
                        $('.uploadWrapper').removeClass('error');
                        $('.lblFileElem').text('Click here to select some files for Uploading'); // alternate labelling
                        droppedFiles = e.originalEvent.dataTransfer.files; // the files that were dropped
                        fileInput.files = null;
                        fileInput.files = droppedFiles;
                        populateUploadList(droppedFiles);
                    });
            }
        });

        $(fileInput).on('change', function () {
            populateUploadList(fileInput.files);
        });

        function populateUploadList(f) {
            filesAvailable.innerHTML = "";
            $('#filesAvailable').show();
            for (i = 0; i < f.length; i++) {
                filesAvailable.innerHTML += "<div class='fileWrapper'><span>" + filesImageType(f[i].name.split('.').pop()) + "</span><span>" + f[i].name + "</span><span style='margin-left: 8px'>" + findFileSize(f[i].size) + "</span></div>";
            }
            $('.lblFileElem').text(f.length + ' files selected.'); // alternate labelling
        }

        function filesImageType(ext) {
            var imgurl;
            switch (ext) {
                case undefined:
                    imgurl = 'images/doc_alert.png'
                    break;
                case "default":
                case "doc":
                case "docx":
                case "docm":
                case "dotm":
                case "dotx":
                    imgurl = 'images/doc.png'
                    break;
                case "xls":
                case "xlsx":
                case "xlsm":
                case "xltx":
                case "xltm":
                    imgurl = 'images/xls-coloured.png'
                    break;
                case "ppt":
                case "pptx":
                case "pptm":
                    imgurl = 'images/ppt-coloured.png'
                    break;
                case "pdf":
                    imgurl = 'images/pdf-coloured.png'
                    break;
                case "msg":
                    imgurl = 'images/msg-coloured.png'
                    break;
            }
            return `<span style="margin-right: 4px;" class="fa fa-file"></span>`;
        }
        function findFileSize(number) {
            if (number < 1024) {
                return number + 'bytes';
            } else if (number >= 1024 && number < 1048576) {
                return (number / 1024).toFixed(1) + 'KB';
            } else if (number >= 1048576) {
                return (number / 1048576).toFixed(1) + 'MB';
            }
        }
        function logCurrent() {
            var file = document.forms['form1']['fupTemplates'].files;
            console.log(file);
        }

        function detectIE() {
            var ua = window.navigator.userAgent;
            var msie = ua.indexOf('MSIE ');
            if (msie > 0) {
                // IE 10 or older => return version number
                return parseInt(ua.substring(msie + 5, ua.indexOf('.', msie)), 10);
            }
            var trident = ua.indexOf('Trident/');
            if (trident > 0) {
                // IE 11 => return version number
                var rv = ua.indexOf('rv:');
                return parseInt(ua.substring(rv + 3, ua.indexOf('.', rv)), 10);
            }
            var edge = ua.indexOf('Edge/');
            if (edge > 0) {
                // Edge (IE 12+) => return version number
                return parseInt(ua.substring(edge + 5, ua.indexOf('.', edge)), 10);
            }
            // other browser
            return false;
        }
    </script>
</body>

</html>